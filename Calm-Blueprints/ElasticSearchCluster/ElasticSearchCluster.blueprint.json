{
    "tasks":[
        {
            "vm_name":"elasticsearch@@{calm_array_index}@@",
            "memory_mb":"4096",
            "network_uuid":"2b8d8ff9-d9bd-444c-8ffe-889eaad30826",
            "uid":"5860b7d04922933db03b46cb",
            "classification":"provision_nutanix",
            "num_cores_per_vcpu":"2",
            "fixed_cost":0.0,
            "vm_disk_uuid":"7445c082-41da-4cf3-93f7-5ba715732173",
            "creation_time":1482733542,
            "variable_cost":0.0,
            "num_vcpus":"1",
            "credential_id":"5860b7d04922933db03b46ca",
            "modification_time":1487058394,
            "vdisks":[

            ],
            "version":37,
            "critical":true,
            "editables":[

            ],
            "name":"Provision Nutanix"
        },
        {
            "uid":"5860b7d04922933db03b46cc",
            "classification":"runshell",
            "script":"#!\/bin\/bash\nset -ex\neval $(python -c '\nips = \"@@{calm_array_vm_ip}@@\".split(\",\")\nif len(ips) == 0:\n    print \"ES_NODES=\"\nelse:\n    print \"ES_NODES='\"'\"'\\\"%s\\\"'\"'\"'\" % '\"'\"'\", \"'\"'\"'.join(ips)\n')\nqu=$(($(($(echo \"@@{calm_array_vm_ip}@@\" | tr \",\" \"\\n\" | wc -l)\/2))+1))\nwget -qO - https:\/\/packages.elastic.co\/GPG-KEY-elasticsearch | sudo apt-key add -\necho \"deb http:\/\/packages.elastic.co\/elasticsearch\/2.x\/debian stable main\" | sudo tee -a \/etc\/apt\/sources.list.d\/elasticsearch-2.x.list\nsudo apt-get update && sudo apt-get -y install elasticsearch\necho 'network.host: 0.0.0.0\ncluster.name: \"@@{CLUSTER_NAME}@@\"\nnode.name: elnode@@{calm_array_index}@@\ndiscovery.zen.ping.multicast.enabled: false' | sudo tee -a \/etc\/elasticsearch\/elasticsearch.yml\necho \"discovery.zen.minimum_master_nodes: $qu\" | sudo tee -a \/etc\/elasticsearch\/elasticsearch.yml\nsudo cp \/etc\/elasticsearch\/elasticsearch.yml \/etc\/elasticsearch\/elasticsearch.yml.template\necho \"discovery.zen.ping.unicast.hosts: [${ES_NODES}]\" | sudo tee -a \/etc\/elasticsearch\/elasticsearch.yml\nsudo service elasticsearch restart\nsudo update-rc.d elasticsearch defaults 95 10",
            "creation_time":1464586868,
            "credential_id":"5860b7d04922933db03b46ca",
            "modification_time":1487058490,
            "version":46,
            "critical":false,
            "editables":[

            ],
            "name":"InstallElasticSearchCluster"
        },
        {
            "uid":"5860b7d04922933db03b46cd",
            "classification":"runshell",
            "script":"#!\/bin\/bash\nset -ex\neval $(python -c '\nips = \"@@{calm_array_private_ip_address}@@\".split(\",\")\nif len(ips) == 0:\n    print \"ES_NODES=\"\nelse:\n    print \"ES_NODES='\"'\"'\\\"%s\\\"'\"'\"'\" % '\"'\"'\", \"'\"'\"'.join(ips)\n')\n\nsudo cp -f \/etc\/elasticsearch\/elasticsearch.yml.template \/etc\/elasticsearch\/elasticsearch.yml\necho \"discovery.zen.ping.unicast.hosts: [${ES_NODES}]\" | sudo tee -a \/etc\/elasticsearch\/elasticsearch.yml\nsudo service elasticsearch restart\nsudo update-rc.d elasticsearch defaults 95 10",
            "creation_time":1464599724,
            "credential_id":"5860b7d04922933db03b46ca",
            "modification_time":1487058394,
            "version":21,
            "critical":false,
            "editables":[

            ],
            "name":"Reconfigure"
        },
        {
            "uid":"5860b7d04922933db03b46ce",
            "classification":"runshell",
            "script":"#!\/bin\/bash\nset -ex\n\n# Install Oracle Java 8\nsudo apt-get update\nsudo apt-get install -y python-software-properties\nsudo add-apt-repository -y ppa:webupd8team\/java\nsudo apt-get update\necho \"debconf shared\/accepted-oracle-license-v1-1 select true\" | sudo debconf-set-selections\necho \"debconf shared\/accepted-oracle-license-v1-1 seen true\" | sudo debconf-set-selections\nsudo apt-get install -y oracle-java8-installer\n",
            "creation_time":1464601221,
            "credential_id":"5860b7d04922933db03b46ca",
            "modification_time":1487058490,
            "version":31,
            "critical":false,
            "editables":[

            ],
            "name":"InstallJava"
        }
    ],
    "uid":"5860b7d04922933db03b46d2",
    "classification":"blueprint",
    "autoscale_config":{
        "post_flow":null,
        "cool_down_period":"1800",
        "uid":"574bd2500807a37777977158",
        "classification":null,
        "alert_count":"1",
        "max_count":"1",
        "pre_flow":null,
        "min_count":"1",
        "listen_for":"external",
        "scale_by":"1",
        "alert_window":"1800"
    },
    "profiles":[
        {
            "cost":0.0,
            "uid":"5860b7d04922933db03b46d1",
            "classification":"resource_profile",
            "service_port":22,
            "address":"@@{vm_ip}@@",
            "creation_time":1482733520,
            "modification_time":1487058394,
            "version":17,
            "provider":"5860b7d04922933db03b46cb",
            "service_type":"ssh",
            "automatic_cost":false,
            "os_type":"Linux",
            "properties":[

            ],
            "name":"Nutanix"
        }
    ],
    "strategy_enabled":false,
    "replaced_tasks":{

    },
    "environment":"default",
    "config":{
        "setup":[

        ],
        "uid":"574bd2500807a37777977159",
        "classification":null,
        "deploy":[

        ]
    },
    "calm-version":"1.8.3",
    "description":"ElasticSearchCluster",
    "parent":null,
    "flows":[
        {
            "tasks":[
                {
                    "uid":"574c04ac0807a3842010ab9e",
                    "classification":null,
                    "work_type":"TASK",
                    "target_id":"cid:00000001",
                    "target_type":"RESOURCE",
                    "work_id":"5860b7d04922933db03b46cd"
                }
            ],
            "uid":"cid:00000002",
            "classification":null,
            "eta":-1,
            "creation_time":1464599537,
            "edges":[

            ],
            "has_critical_tasks":false,
            "modification_time":1487058394,
            "version":0,
            "flow_type":null,
            "critical":false,
            "name":"ResiliencePostflow"
        }
    ],
    "dependencies":[

    ],
    "credentials":[
        {
            "username":"ubuntu",
            "public_key":null,
            "uid":"5860b7d04922933db03b46ca",
            "classification":null,
            "secret_type":"password",
            "creation_time":1464586832,
            "modification_time":1487058394,
            "secret":null,
            "version":30,
            "name":"ubuntu"
        }
    ],
    "bp_id":null,
    "properties":[
        {
            "uid":"58a2ab9d4922930d7a2d7955",
            "classification":null,
            "url":null,
            "editable":true,
            "value":"elcluster",
            "key":"CLUSTER_NAME",
            "property_description":null,
            "property_type":"INTERNAL",
            "setter":null
        }
    ],
    "autoscale_enabled":false,
    "name":"Nu_ElasticSearchCluster",
    "setup_ids":{

    },
    "h":0.0,
    "resiliency_config":{
        "post_flow":null,
        "cool_down_period":"1800",
        "alert_window":"1800",
        "classification":null,
        "alert_count":"1",
        "pre_flow":null,
        "listen_for":"internal",
        "uid":"574bd2500807a3777797715a"
    },
    "current_profile":null,
    "resiliency_enabled":false,
    "architecture":[
        {
            "tasks":[

            ],
            "uid":"cid:00000001",
            "classification":"compute",
            "autoscale_config":{
                "post_flow":"ResiliencePostflow",
                "cool_down_period":"1800",
                "uid":"574bd2500807a3777797714e",
                "classification":null,
                "alert_count":"1",
                "max_count":"20",
                "pre_flow":null,
                "min_count":"1",
                "listen_for":"external",
                "scale_by":"1",
                "alert_window":"1800"
            },
            "profiles":[
                "5860b7d04922933db03b46d1"
            ],
            "strategy_enabled":false,
            "config":{
                "setup":[

                ],
                "uid":"574bd2500807a37777977151",
                "classification":null,
                "deploy":[
                    "5860b7d04922933db03b46ce",
                    "5860b7d04922933db03b46cc"
                ]
            },
            "parent":"5860b7d04922933db03b46cf",
            "array_data":{
                "tasks":[

                ],
                "uid":"5860b7d04922933db03b46dd",
                "classification":"array",
                "creation_time":1464586832,
                "policy_rules":[

                ],
                "autoscale_config":{
                    "post_flow":null,
                    "cool_down_period":"1800",
                    "uid":"574bd2500807a37777977149",
                    "classification":null,
                    "alert_count":"1",
                    "max_count":"1",
                    "pre_flow":null,
                    "min_count":"1",
                    "listen_for":"external",
                    "scale_by":"1",
                    "alert_window":"1800"
                },
                "profiles":[

                ],
                "strategy_enabled":false,
                "version":31,
                "scale_down_task":null,
                "config":{
                    "scale_up":[

                    ],
                    "scale_down":[

                    ],
                    "uid":"574bd2500807a3777797714c",
                    "classification":null
                },
                "parent":"5860b7d04922933db03b46d2",
                "scale_up_task":null,
                "flows":[

                ],
                "modification_time":1487058394,
                "bp_id":"5860b7d04922933db03b46d2",
                "properties":[

                ],
                "count":"3",
                "autoscale_enabled":false,
                "name":"ElasticSearchCluster (Array)",
                "h":0.0,
                "resiliency_config":{
                    "post_flow":null,
                    "cool_down_period":"1800",
                    "alert_window":"1800",
                    "classification":null,
                    "alert_count":"1",
                    "pre_flow":null,
                    "listen_for":"internal",
                    "uid":"574bd2500807a3777797714a"
                },
                "current_profile":null,
                "resiliency_enabled":false,
                "w":0.0,
                "strategy_config":{
                    "post_flow":null,
                    "rollback_pre_flow":null,
                    "classification":null,
                    "rolling_factor":"100",
                    "initial_version":null,
                    "approval_flag":false,
                    "upgrade_flow":null,
                    "rollback_flow":null,
                    "pre_flow":null,
                    "rollback_post_flow":null,
                    "upgrade_type":"rolling_upgrade",
                    "uid":"574bd2500807a3777797714b",
                    "users":[

                    ],
                    "teams":[

                    ],
                    "emails":[

                    ],
                    "initial_count":"1"
                },
                "y":0.0,
                "x":0.0
            },
            "flows":[

            ],
            "dependencies":[

            ],
            "bp_id":"5860b7d04922933db03b46d2",
            "properties":[

            ],
            "autoscale_enabled":true,
            "name":"ElasticSearchCluster",
            "h":0.0,
            "resiliency_config":{
                "post_flow":"ResiliencePostflow",
                "cool_down_period":"1800",
                "alert_window":"1800",
                "classification":null,
                "alert_count":"1",
                "pre_flow":null,
                "listen_for":"external",
                "uid":"574c03c00807a3abfd403b8d"
            },
            "current_profile":"5860b7d04922933db03b46d1",
            "resiliency_enabled":true,
            "w":0.0,
            "strategy_config":{
                "post_flow":null,
                "rollback_pre_flow":null,
                "classification":null,
                "rolling_factor":"100",
                "initial_version":null,
                "approval_flag":false,
                "upgrade_flow":null,
                "rollback_flow":null,
                "pre_flow":null,
                "rollback_post_flow":null,
                "upgrade_type":"rolling_upgrade",
                "uid":"574bd2500807a37777977150",
                "users":[

                ],
                "teams":[

                ],
                "emails":[

                ],
                "initial_count":"1"
            },
            "y":300.0,
            "x":335.0
        }
    ],
    "w":0.0,
    "strategy_config":{
        "post_flow":null,
        "rollback_pre_flow":null,
        "classification":null,
        "rolling_factor":"100",
        "initial_version":null,
        "approval_flag":false,
        "upgrade_flow":null,
        "rollback_flow":null,
        "pre_flow":null,
        "rollback_post_flow":null,
        "upgrade_type":"rolling_upgrade",
        "uid":"574bd2500807a3777797715b",
        "users":[

        ],
        "teams":[

        ],
        "emails":[

        ],
        "initial_count":"1"
    },
    "y":0.0,
    "x":0.0
}