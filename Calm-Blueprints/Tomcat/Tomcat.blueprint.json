{
    "tasks":[
        {
            "uid":"578398731d2e1fbb75b1f1d5",
            "classification":"provision_azure",
            "creation_time":1468242035,
            "user_data":null,
            "credential_id":"57848d561d2e1fce7d4949f1",
            "storage_type":"Standard_GRS",
            "size":"Basic_A1",
            "subnet":"Subnet-1",
            "network":"calmnet",
            "image_type":"os",
            "version":26,
            "location":"East US",
            "editables":[

            ],
            "vm_name":"Tomcat-@@{calm_random}@@",
            "data_disk_list":[
                {
                    "logical_disk_size_in_gb":"2",
                    "uid":"578398731d2e1fbb75b1f1e2",
                    "classification":null,
                    "disk_label":"@@{vm_name}@@-Disk0",
                    "host_caching":"ReadWrite",
                    "lun":"0"
                }
            ],
            "tags":{

            },
            "image_name":"03f55de797f546a1b29d1b8d66be687a__CoreCLR-x64-Beta5-Linux-PartsUnlimited-Demo-App-201504.29",
            "modification_time":1468574822,
            "name":"Provision Azure",
            "install_vm_agent":true,
            "shutdown_behavior":"delete",
            "credential_to_feed_vm":"57848d561d2e1fce7d4949f1",
            "storage_name":"tomcat@@{calm_random}@@",
            "critical":true,
            "os_type":"Linux",
            "endpoints":[
                {
                    "protocol":"tcp",
                    "uid":"578398731d2e1fbb75b1f1e5",
                    "classification":null,
                    "local_port":"22",
                    "load_balanced_set_name":null,
                    "enable_direct_server_return":false,
                    "port":"22",
                    "name":"SSH"
                },
                {
                    "protocol":"tcp",
                    "uid":"578398731d2e1fbb75b1f1e6",
                    "classification":null,
                    "local_port":"80",
                    "load_balanced_set_name":null,
                    "enable_direct_server_return":false,
                    "port":"80",
                    "name":"HTTP"
                },
                {
                    "protocol":"tcp",
                    "uid":"578398731d2e1fbb75b1f1e7",
                    "classification":null,
                    "local_port":"443",
                    "load_balanced_set_name":null,
                    "enable_direct_server_return":false,
                    "port":"443",
                    "name":"HTTPS"
                }
            ]
        },
        {
            "uid":"578398731d2e1fbb75b1f1d7",
            "classification":"runshell",
            "script":"#!\/bin\/bash\nsudo apt-get update -y\ncurl -L https:\/\/www.chef.io\/chef\/install.sh | sudo bash",
            "creation_time":1468242035,
            "credential_id":"57848d561d2e1fce7d4949f1",
            "modification_time":1468574822,
            "version":27,
            "critical":false,
            "editables":[

            ],
            "name":"Install_Chef-Client"
        },
        {
            "uid":"578398731d2e1fbb75b1f1d8",
            "classification":"runshell",
            "script":"#!\/bin\/bash\nsudo apt-get install build-essential curl git vim -y\nsudo mkdir -p \/var\/chef\/cache \/var\/chef\/cookbooks\nsudo git clone https:\/\/github.com\/chef-cookbooks\/tomcat.git \/var\/chef\/cookbooks\/tomcat\/\nsudo \/opt\/chef\/embedded\/bin\/gem install berkshelf\necho \"source 'https:\/\/api.berkshelf.com'\nmetadata\" | sudo tee \/var\/chef\/cookbooks\/tomcat\/Berksfile\nsudo \/opt\/chef\/embedded\/bin\/berks vendor \/var\/chef\/cookbooks --berksfile=\/var\/chef\/cookbooks\/tomcat\/Berksfile\necho \"cookbook_path \\\"\/var\/chef\/cookbooks\\\"\" | tee config.rb\n\n\necho \"tomcat_install 'Install_Tomcat' do\n  version '8.0.36'\nend\ntomcat_service 'Start Tomcat Service' do\n  action :start\n  env_vars [{ 'CATALINA_PID' => '\/my\/special\/path\/tomcat.pid' }]  \nend\" | sudo tee -a  \/var\/chef\/cookbooks\/tomcat\/default.rb\n\nsudo chef-client -z -c config.rb -o tomcat ",
            "creation_time":1468242035,
            "credential_id":"57848d561d2e1fce7d4949f1",
            "modification_time":1468574822,
            "version":27,
            "critical":false,
            "editables":[

            ],
            "name":"Install-Tomcat"
        },
        {
            "uid":"5784d2541d2e1fbb75b21eec",
            "classification":"runshell",
            "script":"#!\/bin\/bash\nsed -i -e 's\/start\/stop\/g' \/var\/chef\/cookbooks\/tomcat\/recipes\/default.rb\n\nsudo chef-client -z -c config.rb -o tomcat ",
            "creation_time":1468322388,
            "credential_id":"57848d561d2e1fce7d4949f1",
            "modification_time":1468574822,
            "version":8,
            "critical":false,
            "editables":[

            ],
            "name":"Stop-Tomcat-Service"
        },
        {
            "uid":"5784d2c01d2e1fe6c862327f",
            "classification":"profile_action_task",
            "creation_time":1468322496,
            "credential_id":null,
            "modification_time":1468574822,
            "version":7,
            "critical":true,
            "editables":[

            ],
            "action":"create",
            "name":"Provider Create Task"
        },
        {
            "uid":"5784d32e1d2e1fe6c86232b7",
            "classification":"runshell",
            "script":"#!\/bin\/bash\nsed -i -e 's\/restart\/start\/g' \/var\/chef\/cookbooks\/tomcat\/recipes\/default.rb\n\nsudo chef-client -z -c config.rb -o tomcat ",
            "creation_time":1468322606,
            "credential_id":"57848d561d2e1fce7d4949f1",
            "modification_time":1468574822,
            "version":4,
            "critical":false,
            "editables":[

            ],
            "name":"Restart-Tomcat-Service"
        }
    ],
    "uid":"578398731d2e1fbb75b1f1dc",
    "classification":"blueprint",
    "autoscale_config":{
        "post_flow":null,
        "cool_down_period":"1800",
        "uid":"578398731d2e1fbb75b1f1f6",
        "classification":null,
        "alert_count":"1",
        "max_count":"1",
        "pre_flow":null,
        "min_count":"1",
        "listen_for":"external",
        "scale_by":"1",
        "alert_window":"1800"
    },
    "profiles":[
        {
            "cost":0.0,
            "uid":"578398731d2e1fbb75b1f1d6",
            "classification":"resource_profile",
            "service_port":22,
            "address":"@@{public_ip_address}@@",
            "creation_time":1468242035,
            "modification_time":1468574822,
            "version":26,
            "provider":"578398731d2e1fbb75b1f1d5",
            "service_type":"ssh",
            "automatic_cost":false,
            "os_type":"Linux",
            "properties":[

            ],
            "name":"Provider 1"
        }
    ],
    "strategy_enabled":false,
    "replaced_tasks":{

    },
    "environment":"default",
    "config":{
        "setup":[

        ],
        "uid":"578398731d2e1fbb75b1f1f7",
        "classification":null,
        "deploy":[

        ]
    },
    "calm-version":"1.8.0",
    "description":"Tomcat",
    "parent":null,
    "flows":[
        {
            "tasks":[
                {
                    "uid":"5784d2c01d2e1fe6c8623288",
                    "classification":null,
                    "work_type":"PROFILE",
                    "target_id":"cid:00000001",
                    "target_type":"RESOURCE",
                    "work_id":"5784d2c01d2e1fe6c862327f"
                },
                {
                    "uid":"5784d2c01d2e1fe6c862328a",
                    "classification":null,
                    "work_type":"TASK",
                    "target_id":"cid:00000001",
                    "target_type":"RESOURCE",
                    "work_id":"578398731d2e1fbb75b1f1d7"
                },
                {
                    "uid":"5784d2c01d2e1fe6c862328c",
                    "classification":null,
                    "work_type":"TASK",
                    "target_id":"cid:00000001",
                    "target_type":"RESOURCE",
                    "work_id":"578398731d2e1fbb75b1f1d8"
                }
            ],
            "uid":"cid:00000002",
            "classification":null,
            "eta":-1,
            "creation_time":1468322515,
            "edges":[
                {
                    "dest":"5784d2c01d2e1fe6c862328a",
                    "src":"5784d2c01d2e1fe6c8623288",
                    "uid":"5784d2c01d2e1fe6c862328d",
                    "classification":null
                },
                {
                    "dest":"5784d2c01d2e1fe6c862328c",
                    "src":"5784d2c01d2e1fe6c862328a",
                    "uid":"5784d2c01d2e1fe6c862328e",
                    "classification":null
                }
            ],
            "has_critical_tasks":true,
            "modification_time":1468574822,
            "version":0,
            "flow_type":"ACTION",
            "critical":true,
            "name":"create-action"
        },
        {
            "tasks":[
                {
                    "uid":"5784d2541d2e1fbb75b21eed",
                    "classification":null,
                    "work_type":"TASK",
                    "target_id":"cid:00000001",
                    "target_type":"RESOURCE",
                    "work_id":"5784d2541d2e1fbb75b21eec"
                }
            ],
            "uid":"cid:00000003",
            "classification":null,
            "eta":-1,
            "creation_time":1468322388,
            "edges":[

            ],
            "has_critical_tasks":false,
            "modification_time":1468574822,
            "version":0,
            "flow_type":null,
            "critical":false,
            "name":"Stop-Tomcat"
        },
        {
            "tasks":[
                {
                    "uid":"5784d32e1d2e1fe6c86232b8",
                    "classification":null,
                    "work_type":"TASK",
                    "target_id":"cid:00000001",
                    "target_type":"RESOURCE",
                    "work_id":"5784d32e1d2e1fe6c86232b7"
                }
            ],
            "uid":"cid:00000004",
            "classification":null,
            "eta":-1,
            "creation_time":1468322606,
            "edges":[

            ],
            "has_critical_tasks":false,
            "modification_time":1468574822,
            "version":0,
            "flow_type":null,
            "critical":false,
            "name":"Restart-Tomcat"
        }
    ],
    "dependencies":[

    ],
    "credentials":[
        {
            "username":"ubuntu",
            "public_key":null,
            "uid":"57848d561d2e1fce7d4949f1",
            "classification":null,
            "secret_type":"ssh_key",
            "creation_time":1468304726,
            "modification_time":1468574822,
            "secret":null,
            "version":20,
            "name":"tomcat"
        }
    ],
    "bp_id":null,
    "properties":[

    ],
    "autoscale_enabled":false,
    "name":"Tomcat",
    "setup_ids":{

    },
    "h":0.0,
    "resiliency_config":{
        "post_flow":null,
        "cool_down_period":"1800",
        "alert_window":"1800",
        "classification":null,
        "alert_count":"1",
        "pre_flow":null,
        "listen_for":"internal",
        "uid":"578398731d2e1fbb75b1f1f8"
    },
    "current_profile":null,
    "resiliency_enabled":false,
    "architecture":[
        {
            "tasks":[

            ],
            "uid":"cid:00000001",
            "classification":"compute",
            "autoscale_config":{
                "post_flow":null,
                "cool_down_period":"1800",
                "uid":"578398731d2e1fbb75b1f1ec",
                "classification":null,
                "alert_count":"1",
                "max_count":"1",
                "pre_flow":null,
                "min_count":"1",
                "listen_for":"external",
                "scale_by":"1",
                "alert_window":"1800"
            },
            "profiles":[
                "578398731d2e1fbb75b1f1d6"
            ],
            "strategy_enabled":false,
            "config":{
                "setup":[

                ],
                "uid":"578398731d2e1fbb75b1f1ef",
                "classification":null,
                "deploy":[
                    "578398731d2e1fbb75b1f1d7",
                    "578398731d2e1fbb75b1f1d8"
                ]
            },
            "parent":"578398731d2e1fbb75b1f1dc",
            "flows":[

            ],
            "dependencies":[

            ],
            "bp_id":"578398731d2e1fbb75b1f1dc",
            "properties":[

            ],
            "autoscale_enabled":false,
            "name":"Tomcat",
            "h":0.0,
            "resiliency_config":{
                "post_flow":null,
                "cool_down_period":"1800",
                "alert_window":"1800",
                "classification":null,
                "alert_count":"1",
                "pre_flow":null,
                "listen_for":"internal",
                "uid":"578398731d2e1fbb75b1f1ed"
            },
            "current_profile":"578398731d2e1fbb75b1f1d6",
            "resiliency_enabled":false,
            "w":0.0,
            "strategy_config":{
                "post_flow":null,
                "rollback_pre_flow":null,
                "classification":null,
                "rolling_factor":"100",
                "initial_version":null,
                "approval_flag":false,
                "upgrade_flow":null,
                "rollback_flow":null,
                "pre_flow":null,
                "rollback_post_flow":null,
                "upgrade_type":"rolling_upgrade",
                "uid":"578398731d2e1fbb75b1f1ee",
                "users":[

                ],
                "teams":[

                ],
                "emails":[

                ],
                "initial_count":"1"
            },
            "y":764.4180603027,
            "x":1213.9777526855
        }
    ],
    "w":0.0,
    "strategy_config":{
        "post_flow":null,
        "rollback_pre_flow":null,
        "classification":null,
        "rolling_factor":"100",
        "initial_version":null,
        "approval_flag":false,
        "upgrade_flow":null,
        "rollback_flow":null,
        "pre_flow":null,
        "rollback_post_flow":null,
        "upgrade_type":"rolling_upgrade",
        "uid":"578398731d2e1fbb75b1f1f9",
        "users":[

        ],
        "teams":[

        ],
        "emails":[

        ],
        "initial_count":"1"
    },
    "y":0.0,
    "x":0.0
}